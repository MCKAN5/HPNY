<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ch√∫c M·ª´ng NƒÉm M·ªõi 2026</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&family=Dancing+Script:wght@700&display=swap"
      rel="stylesheet"
    />

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        font-family: Arial, sans-serif;
      }

      /* ===== N·ªÄN XU√ÇN ===== */
      #springBg {
        position: fixed;
        inset: 0;
        z-index: 0;
        background: linear-gradient(120deg, #ff4e50, #ff9966, #ffcc33);
        background-size: 400% 400%;
        animation: bgMove 10s ease infinite;
      }
      @keyframes bgMove {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* ===== COUNTDOWN ===== */
      #countdown {
        position: absolute;
        top: 35%;
        width: 100%;
        text-align: center;
        font-size: 20vw;
        font-weight: bold;
        z-index: 10;
        color: yellow;
        text-shadow:
          0 0 20px red,
          0 0 40px orange;
      }

      /* ===== NH·∫§N ƒê·ªÇ XEM ===== */
      #tapHint {
        position: absolute;
        top: 65%;
        width: 100%;
        text-align: center;
        font-size: 6vw;
        color: white;
        z-index: 10;
        animation: blink 1s infinite;
      }
      @keyframes blink {
        50% {
          opacity: 0.3;
        }
      }

      /* ===== CANVAS ===== */
      canvas {
        position: absolute;
        inset: 0;
        z-index: 2;
        display: none;
      }

      /* ===== TEXT ===== */
      #textContainer {
        position: absolute;
        inset: 0;
        z-index: 3;
        pointer-events: none;
        display: none;
      }
      .text {
        position: absolute;
        bottom: -50px;
        font-size: 7vw;
        animation: fly 8s linear forwards;
        white-space: nowrap;
      }
      @keyframes fly {
        to {
          transform: translateY(-120vh);
          opacity: 0;
        }
      }

      /* ===== PHOTO ===== */
      .photo {
        position: absolute;
        bottom: -200px;
        width: 22vw;
        border-radius: 12px;
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.9);
        animation: photoFly linear infinite;
        z-index: 3;
      }
      @keyframes photoFly {
        to {
          transform: translateY(-130vh);
        }
      }
    </style>
  </head>

  <body>
    <div id="springBg"></div>

    <div id="countdown">10</div>
    <div id="tapHint">üëâ Nh·∫•n v√†o m√†n h√¨nh ƒë·ªÉ xem</div>

    <canvas id="fireworks"></canvas>
    <div id="textContainer"></div>

    <audio id="tickSound" src="music/tt.mp3" preload="auto"></audio>
    <audio id="bgMusic" src="music/vsny.mp3" preload="auto" loop></audio>

    <script>
      /* ===== DANH S√ÅCH ·∫¢NH ===== */
      const images = [
        "img/ln12.jpg",
        "img/ln13.jpg",
        "img/ln14.jpg",
        "img/ln15.jpg",
        "img/ln28.png",
        "img/ln17.jpg",
        "img/ln18.jpg",
        "img/ln19.jpg",
        "img/ln20.jpg",
        "img/ln21.jpg",
        "img/ln27.png",
        "img/ln30.jpg",
        "img/ln31.jpg",
      ];

      /* ===== ELEMENT ===== */
      const countdownEl = document.getElementById("countdown");
      const tapHint = document.getElementById("tapHint");
      const textContainer = document.getElementById("textContainer");
      const tickSound = document.getElementById("tickSound");
      const music = document.getElementById("bgMusic");
      const canvas = document.getElementById("fireworks");
      const ctx = canvas.getContext("2d");

      canvas.width = innerWidth;
      canvas.height = innerHeight;

      let time = 10;

      /* ===== M·ªû KH√ìA AUDIO ===== */
      document.body.addEventListener(
        "click",
        () => {
          tickSound.play().then(() => {
            tickSound.pause();
            tickSound.currentTime = 0;
          });
          music.play().then(() => {
            music.pause();
            music.currentTime = 0;
          });
        },
        { once: true },
      );

      /* ===== COUNTDOWN ===== */
      startCountdown();

      function startCountdown() {
        countdownEl.textContent = time;

        const timer = setInterval(() => {
          tickSound.currentTime = 0;
          tickSound.play();

          countdownEl.textContent = time;
          time--;

          if (time < 0) {
            clearInterval(timer);
            countdownEl.style.display = "none";
            tapHint.style.display = "none";
            music.play();
            startShow();
          }
        }, 1000);
      }

      /* ===== SHOW ===== */
      function startShow() {
        canvas.style.display = "block";
        textContainer.style.display = "block";
        createPhotos();
        createTexts();
        startFireworks();
      }

      /* ===== ·∫¢NH KH√îNG TR√ôNG ===== */
      function createPhotos() {
        const columns = images.length;
        const gap = 100 / columns;

        images.forEach((src, i) => {
          const img = document.createElement("img");
          img.src = src;
          img.className = "photo";
          img.style.left = i * gap + gap / 4 + "%";

          const duration = 8 + Math.random() * 5;
          img.style.animationDuration = duration + "s";

          document.body.appendChild(img);
        });
      }

      /* ===== CH·ªÆ ===== */
      function createTexts() {
        setInterval(() => {
          if (textContainer.children.length > 3) return;

          const d = document.createElement("div");
          d.className = "text";
          d.innerHTML = "üéâ Ch√∫c M·ª´ng NƒÉm M·ªõi 2026 üéâ<br>L·ªôc Ninh 11 ‚ù§Ô∏è‚ù§Ô∏è";
          d.style.left = Math.random() * 60 + "%";
          d.style.fontFamily =
            Math.random() > 0.5 ? "Pacifico" : "Dancing Script";

          textContainer.appendChild(d);
          setTimeout(() => d.remove(), 8000);
        }, 4000);
      }

      /* ===== PH√ÅO HOA ===== */
      let particles = [];

      function startFireworks() {
        setInterval(() => {
          let x = Math.random() * canvas.width;
          let y = (Math.random() * canvas.height) / 2;

          for (let i = 0; i < 60; i++) {
            particles.push({
              x,
              y,
              dx: Math.random() * 6 - 3,
              dy: Math.random() * 6 - 3,
              life: 100,
            });
          }
        }, 500);
        animate();
      }

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach((p, i) => {
          p.x += p.dx;
          p.y += p.dy;
          p.life--;
          ctx.fillStyle = `hsl(${Math.random() * 360},100%,60%)`;
          ctx.fillRect(p.x, p.y, 3, 3);
          if (p.life <= 0) particles.splice(i, 1);
        });
        requestAnimationFrame(animate);
      }
    </script>
  </body>
</html>
