<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ch√∫c M·ª´ng NƒÉm M·ªõi 2026</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&family=Dancing+Script:wght@700&display=swap"
      rel="stylesheet"
    />

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        font-family: Arial, sans-serif;
      }

      /* ===== N·ªÄN XU√ÇN ===== */
      #springBg {
        position: fixed;
        inset: 0;
        background: linear-gradient(120deg, #ff4e50, #ff9966, #ffcc33);
        background-size: 400% 400%;
        animation: bgMove 12s ease infinite;
        z-index: 0;
      }
      @keyframes bgMove {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* ===== START ===== */
      #startScreen {
        position: absolute;
        inset: 0;
        z-index: 10;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: yellow;
        text-shadow: 0 0 20px red;
      }

      #countdown {
        font-size: 80px;
        font-weight: bold;
      }

      #tap {
        margin-top: 20px;
        font-size: 18px;
        color: white;
      }

      /* ===== ALBUM ===== */
      #album {
        position: absolute;
        inset: 0;
        display: none;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        z-index: 2;
        padding: 10px;
      }

      #album img {
        max-width: 95%;
        max-height: 65%;
        border-radius: 15px;
        box-shadow: 0 0 25px white;
        opacity: 0;
        transition: opacity 0.8s;
      }

      /* ===== TEXT ===== */
      #textUnder {
        margin-top: 15px;
        text-align: center;
        color: white;
      }

      #textUnder .main {
        font-size: 24px;
        font-family: Pacifico;
      }

      #textUnder .sub {
        font-size: 20px;
        font-family: Dancing Script;
      }

      /* ===== PH√ÅO HOA ===== */
      canvas {
        position: absolute;
        inset: 0;
        display: none;
        z-index: 1;
      }
    </style>
  </head>

  <body>
    <div id="springBg"></div>

    <!-- START -->
    <div id="startScreen">
      <div id="countdown">10</div>
      <div id="tap">üëâ Ch·∫°m m√†n h√¨nh ƒë·ªÉ b·∫Øt ƒë·∫ßu</div>
    </div>

    <!-- ALBUM -->
    <div id="album">
      <img id="albumImg" />
      <div id="textUnder">
        <div class="main">üéâ Ch√∫c M·ª´ng NƒÉm M·ªõi 2026 üéâ</div>
        <div class="sub">‚ù§Ô∏è L·ªôc Ninh 11 ‚ù§Ô∏è</div>
      </div>
    </div>

    <!-- FIREWORK -->
    <canvas id="fireworks"></canvas>

    <!-- MUSIC -->
    <audio id="introMusic" src="music/tt.mp3"></audio>
    <audio id="mainMusic" src="music/vsny1.mp3" loop></audio>

    <script>
      /* ===== DANH S√ÅCH ·∫¢NH ===== */
      const images = [
        "img/ln34.jpg",
        "img/ln33.jpg",
        "img/ln32.jpg",
        "img/ln35.jpg",
        "img/ln38.jpg",
        "img/ln39.jpg",
        "img/ln12.jpg",
        "img/ln13.jpg",
        "img/ln27.png",
        "img/ln28.png",
        "img/ln17.jpg",
        "img/ln18.jpg",
        "img/ln19.jpg",
        "img/ln20.jpg",
        "img/ln43.jpg",
        "img/ln46.jpg",
        "img/ln44.jpg",
        "img/ln41.jpg",
        "img/ln42.jpg",
        "img/ln26.jpg",
        "img/ln14.jpg",
        "img/ln15.jpg",
        "img/ln16.jpg",
        "img/ln21.jpg",
        "img/ln22.jpg",
        "img/ln23.jpg",
        "img/ln31.jpg",
        "img/ln37.jpg",
      ];

      /* preload ·∫£nh cho m∆∞·ª£t */
      images.forEach((src) => {
        const i = new Image();
        i.src = src;
      });

      /* ===== ELEMENT ===== */
      const startScreen = document.getElementById("startScreen");
      const countdownEl = document.getElementById("countdown");
      const album = document.getElementById("album");
      const albumImg = document.getElementById("albumImg");
      const canvas = document.getElementById("fireworks");
      const ctx = canvas.getContext("2d");
      const introMusic = document.getElementById("introMusic");
      const mainMusic = document.getElementById("mainMusic");

      canvas.width = innerWidth;
      canvas.height = innerHeight;

      /* ===== CLICK M·ªû KH√ìA AUDIO ===== */
      let started = false;
      document.body.addEventListener("click", async () => {
        if (started) return;
        started = true;

        try {
          await introMusic.play();
          introMusic.pause();
          introMusic.currentTime = 0;

          await mainMusic.play();
          mainMusic.pause();
          mainMusic.currentTime = 0;
        } catch (e) {}

        startCountdown();
      });

      /* ===== COUNTDOWN ===== */
      let time = 10;
      function startCountdown() {
        const t = setInterval(() => {
          countdownEl.textContent = time;
          introMusic.currentTime = 0;
          introMusic.play().catch(() => {});
          time--;

          if (time < 0) {
            clearInterval(t);
            introMusic.pause();
            startScreen.style.display = "none";
            startAlbum();
          }
        }, 1000);
      }

      /* ===== ALBUM ===== */
      let index = 0;
      function startAlbum() {
        album.style.display = "flex";
        canvas.style.display = "block";
        mainMusic.play().catch(() => {});
        showImage();
        startFireworks();
      }

      function showImage() {
        if (index >= images.length) index = 0;

        albumImg.style.opacity = 0;

        setTimeout(() => {
          albumImg.src = images[index];
          albumImg.style.opacity = 1;
          index++;
        }, 400);

        setTimeout(showImage, 3000);
      }

      /* ===== PH√ÅO HOA ===== */
      let particles = [];
      function startFireworks() {
        setInterval(() => {
          let x = Math.random() * canvas.width;
          let y = (Math.random() * canvas.height) / 2;

          for (let i = 0; i < 50; i++) {
            particles.push({
              x,
              y,
              dx: Math.random() * 6 - 3,
              dy: Math.random() * 6 - 3,
              life: 100,
            });
          }
        }, 600);

        animate();
      }

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach((p, i) => {
          p.x += p.dx;
          p.y += p.dy;
          p.life--;

          ctx.fillStyle = `hsl(${Math.random() * 360},100%,60%)`;
          ctx.fillRect(p.x, p.y, 3, 3);

          if (p.life <= 0) particles.splice(i, 1);
        });
        requestAnimationFrame(animate);
      }
    </script>
  </body>
</html>
